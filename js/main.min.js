const btnContacts=document.querySelector(".btn-contacts"),modal=document.querySelector(".modal"),modalClose=modal.querySelector(".modal-close"),modalForm=modal.querySelector(".modal-form"),nameInput=modal.querySelector(".name-input"),mailInput=modal.querySelector(".mail-input"),messageInput=modal.querySelector(".message-input");let isStorageSupport=!0,nameFromStorage="",mailFromStorage="";try{nameFromStorage=localStorage.getItem("name"),mailFromStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function init(){const e=new ymaps.Map("map",{center:[59.938916,30.321529],zoom:17,controls:["zoomControl"],behaviors:["drag"]});var a=new ymaps.Placemark([59.938635,30.323118],{hintContent:'<div class="contacts__hint">ул. Большая Конюшенная, 19/8</div>'},{iconLayout:"default#image",iconImageHref:"./img/map-marker.svg",iconImageSize:[231,190],iconImageOffset:[-55,-180]});e.geoObjects.add(a)}btnContacts.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),nameFromStorage?nameFromStorage?(nameInput.value=nameFromStorage,mailInput.focus()):(mailInput.value=mailFromStorage,message.focus()):nameInput.focus()}),modalClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error")}),modalForm.addEventListener("submit",function(e){nameInput.value&&mailInput.value?isStorageSupport&&localStorage.setItem("name",nameInput.value):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal-show")&&(e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error"))}),ymaps.ready(init);
